<?phpdefined('BASEPATH') OR exit('No direct script access allowed');class UserModel extends CI_Model{	public function save_user()	{		$username = $_POST['username'];		$password = md5($_POST['pass']);		$createdOn = date('Y-m-d H:i:s');		if(isset($_POST['lock'])){			$is_active = 0;		}else{			$is_active = 1;		}        if($this->session->userdata('in_use')){            $createdBy = $_SESSION['user'][0]->id;        }		$data = array('UserName' => $username,                      'Password' => $password,                      'IsAdmin' => 0,                      'Locked' => $is_active,                      'inUse' => 0,                      'CreatedOn' => $createdOn,                      'CreatedBy' => $createdBy				);		$this->db->insert('users', $data);		if($this->db->affected_rows() > 0){			return true;		}else{			return false;		}	}	public function get_all_users()    {		return $this->db->get('users')->result();	}	public function getCreatedBy($id)    {		$this->db->select('UserName');		$this->db->where('id', $id);		return $this->db->get('users')->result();	}	public function get_user($id)    {		$this->db->select('UserName,Locked');		$this->db->where('id', $id);		return $this->db->get('users')->result();	}	public function update_user($id)    {        if(!empty($_POST['password'])){            $password = $_POST['password'];            $data=array('UserName' => $_POST['username'], 'Password' => md5($password), 'Locked'=>$_POST['lock']);		}else{			$data=array('UserName' => $_POST['username'], 'Locked'=> $_POST['lock']);		}		$this->db->where('id',$id);		$this->db->update('users',$data);		if($this->db->affected_rows()>0)		{			return true;		} else {			return false;		}	}	public function update_user_id()	{		$updatedOn = date('Y-m-d H:i:s');  		if($this->session->userdata('in_use')){            $updatedBy = $_SESSION['user'][0]->id;        }        $id= $_SESSION['user'][0]->id;		if(!empty($_POST['password'])){			$password = $_POST['password'];			$data=array('UserName' => $_POST['username'], 'Password' => md5($password), 'UpdatedBy'=>$updatedBy, 'UpdatedOn' => $updatedOn);		}else{			$data=array('UserName' => $_POST['username'], 'UpdatedBy'=>$updatedBy, 'UpdatedOn' => $updatedOn);		}		$this->db->where('id',$id);		$this->db->update('users',$data);		if($this->db->affected_rows()>0)		{			return true;		}		else		{			return false;		}	}	public function update_status($id)	{	    if($id != 1){            $this->db->set('Locked',$_POST['status']);            $this->db->where('id', $id);            $this->db->update('users');            if($this->db->affected_rows() > 0){                return true;            }else{                return false;            }	    }else{			return false;		}	}	public function delete_user($id)	{	    if($id == 1){        }else{            $this->db->where('id', $id);            $this->db->delete('users');            if($this->db->affected_rows() > 0){                return true;            }else{                return false;            }	    }	}}