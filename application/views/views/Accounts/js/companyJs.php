<script type="text/javascript">    $(document).ready(function(){        $.ajax({            url:'<?php echo site_url('Accounts/CompanyStructures/checkParent')?>',            success:function(response){                var data = $.parseJSON(response);                //console.log(response);                if(data['success']){                }else{                    $("#companyForm").removeAttr("style");                }            }        });    });    var Edit_id;    $('.edit').on('click',function(){        Edit_id = $(this).data('id');        $.ajax({            type:'GET',            url:'<?php echo site_url('Accounts/CompanyStructures/getEditAccount'); ?>'+'/'+Edit_id,            returnType:'JSON',            success:function(response){                var data = $.parseJSON(response);                var is_new_allow = data.new_allowed;                //alert(is_new_allow);                if(is_new_allow === false){                    $('.insertNew').attr("disabled","true");                    $('#link').show();                    if(data.parent_code == 1){                        $('.ser').show();                        if(data.isSerialize == 0){                            //$('input[name=isSerialize]:checked').val('0');                            var $radios = $('input:radio[name=isSerialize]');                            $radios.filter('[value=0]').prop('checked', true);                        }else{                            var $radios = $('input:radio[name=isSerialize]');                            $radios.filter('[value=1]').prop('checked', true);                        }                    }else{                        $('.ser').hide();                    }                    $('#parentcode').val(data.parent_code);                    $('#levelcode').val(data.level_code);                    $('#levelname').val(data.level_name);                    $('#parentname').val(data.parent_name);                     //$('.insertNew').hide();                }else{                    $('.insertNew').removeAttr("disabled","true");                    $('#parentcode').val(data.parent_code);                    if(data.parent_code == 1){                        $('.ser').show();                        if(data.isSerialize == 0){                            //$('input[name=isSerialize]:checked').val('0');                            var $radios = $('input:radio[name=isSerialize]');                            $radios.filter('[value=0]').prop('checked', true);                        }else{                            var $radios = $('input:radio[name=isSerialize]');                            $radios.filter('[value=1]').prop('checked', true);                        }                    }else{                        $('.ser').hide();                    }                    $('#levelcode').val(data.level_code);                    $('#levelname').val(data.level_name);                    $('#parentname').val(data.parent_name);                }            }        });    });    $('.edit8').on('click',function(){        Edit_id = $(this).data('id');        $.ajax({            type:'GET',            url:'<?php echo site_url('Accounts/CompanyStructures/getEditAccount'); ?>'+'/'+Edit_id,            returnType:'JSON',            success:function(response){                var data = $.parseJSON(response);                //alert(JSON.stringify(data.parentCode));                $('#parentcode').val(data.parent_code);                $('#levelcode').val(data.level_code);                if(data.parent_code == 1){                    $('.ser').show();                    if(data.isSerialize == 0){                        //$('input[name=isSerialize]:checked').val('0');                        var $radios = $('input:radio[name=isSerialize]');                        $radios.filter('[value=0]').prop('checked', true);                    }else{                        var $radios = $('input:radio[name=isSerialize]');                        $radios.filter('[value=1]').prop('checked', true);                    }                }else{                    $('.ser').hide();                }                $('#levelname').val(data.level_name);                $('#parentname').val(data.parent_name);                $('.insertNew').hide();            }        });    });    $('.insertNew').on('click',function(){        $.ajax({            type:'GET',            url:'<?php echo site_url('Accounts/CompanyStructures/newAccount'); ?>'+'/'+Edit_id,            returnType:'JSON',            success:function(response){                var data = $.parseJSON(response);                //alert(JSON.stringify(data.parentCode));                if(data.parent_ID == 1){                    $('.ser').show();                }else{                    $('.ser').hide();                }                $('#parentcode').val(data.parent_ID);                $('#levelcode').val(data.new_ID);                $('#levelname').val('');                $('#parentname').val(data.parent_Name);                $('.dataSave').show();                $('.dataEdit').hide();                $('.insertNew').hide();                $('.dataDelete').hide();                Edit_id = "";            }        });        $('#levelname').focus();    });    $('.dataSave').on('click',function(){        var post = new Object();        if($('#levelname').val().length <= 50) {            post.ParentCode = $('#parentcode').val();            post.LevelCode = $('#levelcode').val();            post.LevelName = $('#levelname').val();            post.isSerialize = $('input[name=isSerialize]:checked').val();            if (post.LevelName == "") {                alert("لیول کا نام درکار ہے");            } else {                $.ajax({                    type: 'POST',                    url: '<?php echo site_url('Accounts/CompanyStructures/SaveNewAccount'); ?>',                    returnType: 'JSON',                    data: post,                    success: function (response) {                        var data = $.parseJSON(response);                        if (data['success']) {                            new PNotify({                                title: 'کامیابی',                                text: 'لیول کامیابی سے شامل ھو گیا',                                type: 'success',                                hide: true                            });                            setTimeout(function () {                                window.location.href = "<?php echo site_url('Accounts/CompanyStructures') ?>";                            }, 1500);                        }                    },                    error: function () {                        new PNotify({                            title: 'انتباہ',                            text: 'Account ID Already Present Try Another One',                            type: 'error',                            hide: true                        });                        setTimeout(function () {                            location.reload();                        }, 1500);                    }                });            }        }        else {            alert("لیول نام 50 حروف سے کم ہونا چاہئے");        }    });    $('.dataEdit').on('click',function(){        var post = new Object();        //alert('adsad');        if($('#levelname').val().length <= 50) {        post.ParentCode = $('#parentcode').val();        post.LevelCode = $('#levelcode').val();        post.LevelName = $('#levelname').val();        post.IsSerealized = $('input[name=isSerialize]:checked').val();        if(post.LevelName == ""){            alert('لیول کا نام درکار ہے');           //new PNotify({            //    title: 'کامیابی',            //    text: 'لیول کا نام درکار ہے',           //     type: 'success',            //    hide: true           // });        }else{            $.ajax({                type:'POST',                url:'<?php echo site_url('Accounts/CompanyStructures/EditAccount'); ?>'+'/'+Edit_id,                returnType:'JSON',                data:post,                success:function(response){                    var data = $.parseJSON(response);                    if(data['success']){                        new PNotify({                            title: 'کامیابی',                            text: 'لیول تدوین کامیاب',                            type: 'success',                            hide: true                        });                        setTimeout(function(){                            location.reload();                        },1500);                    }                }            });        }        }        else {            alert("لیول نام 50 حروف سے کم ہونا چاہئے");        }    });    $('.dataDelete').on('click',function(){        (new PNotify({            title: 'تصدیق درکار',            text: 'کیا آپ حذف کرنا چاہتے ہیں؟',            icon: 'glyphicon glyphicon-question-sign',            hide: false,            type: "success",            confirm: {                confirm: true,                buttons: [{text: "جی ہاں", addClass: "", promptTrigger: true, click: function(notice, value){ notice.remove(); notice.get().trigger("pnotify.confirm", [notice, value]); }},{text: "نیہں", addClass: "", click: function(notice){ notice.remove(); notice.get().trigger("pnotify.cancel", notice); }}]            },            buttons: {                closer: false,                sticker: false            },            history: {                history: false            },            addclass: 'stack-modal',            stack: {'dir1': 'down', 'dir2': 'right', 'modal': true}        })).get().on('pnotify.confirm', function(){            $.ajax({                url:'<?php echo site_url('Accounts/CompanyStructures/DeleteAccount'); ?>'+'/'+Edit_id,                returnType:'JSON',                success:function(response){                    var data = $.parseJSON(response);                    if(data['success']){                        new PNotify({                            title: 'کامیابی',                            text: 'لیول حذف کامیاب',                            type: 'success',                            hide: true                        });                        setTimeout(function(){                            location.reload();                        },1500);                    }                    if(data['link']){                        new PNotify({                            title: 'انتباہ',                            text: "لیول حذف کرنے سے پہلے اسکا ربط حذف کریں",                            type: 'error',                            hide: true                        });                        setTimeout(function(){                            location.reload();                        },1500);                    }                    if(data['error']){                        new PNotify({                            title: 'انتباہ',                            text: data['message'],                            type: 'error',                            hide: true                        });                        setTimeout(function(){                            location.reload();                        },1500);                    }                }            });        }).on('pnotify.cancel', function(){        });                    //}    });//    $('#gridSystemModal').on('hidden.bs.modal', function () {//        location.reload();//    });//    $('#gridSystemModal').on('hidden.bs.modal', function () {//        $(this).find("input,textarea,select").val('').end();//    });    $('#gridSystemModal').on('shown.bs.modal', function () {        //$('#levelname').focus();        $("#levelname").focus(function(){            $('#dataDelete').hide();            $('.insertNew').hide();        });        $("#levelname").blur(function(){            $('#dataDelete').show();            $('.insertNew').show();        });    });</script>